# 施工体制チェッカー (SekouTaiseiMaker)

建設工事の施工体制書類を管理・チェックするWebアプリケーション。

**デモ**: https://sekoutaiseimaker.pages.dev

## 機能

- **書類管理ダッシュボード**: 元請・下請各社の提出書類状況を一覧表示
- **全体書類リンク**: 施工体系図、施工体制台帳、下請契約書への直接アクセス
- **書類存在チェック**: 未提出書類の検出
- **有効期限チェック**: 期限切れ・期限間近の書類を警告
- **編集モード**: ブラウザ上で書類情報を編集
- **JSON入出力**: データのインポート/エクスポート
- **共有URL生成**: Base64エンコードでデータをURLに埋め込み共有
- **LocalStorageキャッシュ**: 作業状態の自動保存

## 技術スタック

- **Rust** + **Leptos** (CSR mode)
- **WebAssembly** (trunk build)
- **Cloudflare Pages** (ホスティング)

## セットアップ

### 必要環境

```bash
# Rustツールチェーン
rustup target add wasm32-unknown-unknown

# trunk (WASMビルドツール)
cargo install trunk
```

### ローカル開発

```bash
# 開発サーバー起動 (ホットリロード対応)
trunk serve --open

# 本番ビルド
trunk build --release
```

### デプロイ

```bash
# Cloudflare Pagesへデプロイ
npx wrangler pages deploy dist
```

## データ構造

### sekoutaisei.json

```json
{
  "project_name": "工事名",
  "client": "発注者",
  "period": "工期",
  "project_docs": {
    "sekou_taikeizu": { "name": "施工体系図", "url": "...", "status": true },
    "sekou_taisei_daicho": { "name": "施工体制台帳", "url": "...", "status": true },
    "shitauke_keiyaku": { "name": "下請契約書", "url": "...", "status": true }
  },
  "contractors": [
    {
      "id": "sanyu",
      "name": "三雄建設",
      "role": "元請",
      "docs": {
        "01_建設業許可": { "status": true, "file": "...", "url": "..." },
        "02_事業所番号": { "status": true, "file": "...", "url": "..." }
      }
    }
  ],
  "contracts": [
    { "id": "...", "name": "施工体制内容書類", "contractor": "業者名", "url": "..." }
  ],
  "verification": {
    "last_checked": "2025-12-31",
    "results": [...]
  }
}
```

### 標準書類リスト

| キー | 書類名 |
|------|--------|
| 01_建設業許可 | 建設業許可証 |
| 02_事業所番号 | 健康保険事業所番号 |
| 03_労働保険番号 | 労働保険番号 |
| 041_現場代理人資格 | 現場代理人の資格証明 |
| 042_現場代理人在籍 | 現場代理人の在籍証明 |
| 051_主任技術者資格 | 主任技術者の資格証明 |
| 052_主任技術者在籍 | 主任技術者の在籍証明 |
| 06_法定外労災 | 法定外労災保険証明 |
| 07_建退共 | 建退共加入証明 |
| 08_作業員名簿 | 作業員名簿 |
| 09_暴対法誓約書 | 暴力団排除誓約書 |

## 画面構成

```
┌─────────────────────────────────────────┐
│ 施工体制チェッカー          [編集中] ⋮ │
├─────────────────────────────────────────┤
│ 工事名                                  │
│ 発注者 | 工期                           │
│ ████████████████░░░░ 80%               │
├─────────────────────────────────────────┤
│ 全体書類                                │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐    │
│ │施工体系図│ │施工体制 │ │下請契約 │    │
│ │   ✓    │ │ 台帳 ✓ │ │ 書 ✓  │    │
│ └─────────┘ └─────────┘ └─────────┘    │
├─────────────────────────────────────────┤
│ 各社書類                                │
│ ┌───────────────┐ ┌───────────────┐    │
│ │ 三雄建設 元請 │ │ ユナイト 切削│    │
│ │ 10/10        │ │ 8/9          │    │
│ │ ✓建設業許可  │ │ ✓建設業許可  │    │
│ │ ✓事業所番号  │ │ ✗事業所番号  │    │
│ │ ...          │ │ ...          │    │
│ └───────────────┘ └───────────────┘    │
├─────────────────────────────────────────┤
│ 下請施工体制                            │
│ ・施工体制内容書類 (ユナイト)           │
│ ・施工体制内容書類 (アイエスティー)     │
└─────────────────────────────────────────┘
```

## 関連スキル

- **google-api**: Sheets/Drive API操作
- **sekou-taisei-verification**: Gemini APIでのPDF整合性チェック
- **construction-spreadsheets**: 施工計画書・材料確認願いシート操作

## ディレクトリ構成

```
SekouTaiseiMaker/
├── src/
│   └── main.rs          # Leptosアプリケーション
├── data/
│   └── sample_project.json  # サンプルデータ
├── index.html           # HTMLテンプレート
├── style.css            # スタイルシート
├── Cargo.toml           # Rust依存関係
└── README.md
```

## ライセンス

MIT
